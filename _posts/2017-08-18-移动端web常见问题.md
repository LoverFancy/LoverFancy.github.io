---
layout:     post
title:      移动端web常见问题
subtitle:   移动端web常见问题
date:       2017-08-18
author:     SkioFox
header-img: img/post-bg-YesOrNo.jpg
catalog: true
tags:

- flex
- rem
- vm布局
- media
- 300ms延时
- 多tab懒加载
- 上拉加载/下拉刷新
- touch

---

### 移动端布局

1. 媒体查询+rem(适配方案)

> 为使得页面布局不管在什么设备上都是正常，协调的情况，就会采用媒体查询 + rem，来根据不同的设备去相应的改变元素的大小。(很多时候为了方便宽度会去%单位)

- rem 
    - 字体单位
    > 值根据html根元素大小而定，同样可以作为宽度/高度灯单位。

    - 适配原理

        > 将px替换成rem，动态修改html的font-size适配(1rem=(html的font-size))

        - 使用media适配不同大小的设备(缺点：需要添加很多的media条件)

        ```css
            @media screen and (max-width:360px) and (min-width:321px) {
                html {
                    font-size: 20px;
                }
            }
            @media screen and (max-width:320px) {
                html {
                    font-size: 24px;
                }
            }
            @media screen and (max-width:360px) {
                html {
                    font-size: 20px;
                }
            }
        ```
        - 使用js动态修改

        ```js
            window.addEventListener('resize',()=>{
                // 获取视窗宽度
                let htmlWidth = document.documentElement.clientWidth || document.body.clientWidth;
                // 获取html元素
                let let htmlDom = document.getElementsByTagName('html')[0];

                htmlDom.style.fontSize = htmlWidth/10 + 'px';
            })
        ```
        ```scss
            .hello {
                width: pxTorem(100px);
                height: pxTorem(100px);
                &.b {
                    width: pxTorem(50px);
                    height: pxTorem(50px);
                }
            }
            @function pxTorem($px){
                /* iphone 6为基础 375 */
                $rem: 37.5px;
                @return ($px/$rem) + rem;
            }
        ```

    - 兼容性
    > IOS6以上和android2.1以上，基本覆盖所有的流行手机系统

- 媒体查询(查看中签的文章有详细讲解)

2. flex流式布局

- flex布局左边固定宽度，右边自适应

```html
  <div class="goods">
    <div class="menu-wrapper">
    <div class="foods-wrapper">
  </div>
```
```s
  .goods
    display: flex
    position: absolute
    top: 174px
    bottom: 46px
    width: 100%
    overflow: hidden
    .menu-wrapper
      flex: 0 0 80px
      // 解决android浏览器兼容问题
      width: 80px
      background: #f3f5f7
    .foods-wrapper
      flex: 1
```
- flex常用属性
    - flex 属性

    > flex(flex-grow | flex-shrink | flex-basis )(flex-grow空间充足时等分放大倍数/flex-shrink空间不足时缩小比例/ flex-basis元素占位值)
    > 简写：flex:1 flex:auto flex:none => flex: 1 1 auto flex:0 1 auto flex: 0 0 auto

    - display:flex/flex-direction/justify-content/align-items...这里就展开详解了

3. vm布局方案（ios8和android 4.4以上）

    - vm: 1vm等于视口宽度的1%
    - vh: 1vh等于视口高度的1%
    - vmin：选取vw/vh中最小的那个
    - vmax：选取vw/vh中最大的那个

    > 参考淘宝的解决方案

4. touch事件

    - touchstart
    - touchmove
    - touchend
    - touchcancel

    ![avatar](/img/HTMLCSS/touch.jpg)

> 总结最常用的用法：移动端通用布局方案(定高,宽度百分比/flex流式布局/Media Query(媒体查询)) 或者 vw方案

### 

### 常见问题

1. 为什么很多PC端网站在手机上打开会出现等比例缩小的情况,原理是什么？

> 答：这是属于浏览器本身的特性，浏览器会将页面缩小到visual viewport的可视区域内。导致的问题就是页面的内容被缩小，不方便观看。

2. 如何将理想视窗等于设备的物理视窗达到显示的完美效果？

> 答：`<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>`

3. 移动端300ms延时产生原因和消除方法？

> 答：因为浏览器需要300ms的事件判断是点击事件还是双击事件(双击会缩放屏幕)，所以在移动端浏览器会出现300ms的问题。解决方法：① 在meta标签中禁止用户缩放功能（safri是不支持的）。② Tap组件(FastClick,react-tap):原理是利用touchstart和touchmove去判断是否有后续操作（在新ios上已经移除300ms的功能）。

4. 1px边框实现(见另一篇文章)

5. 滚动加载数据

6. 移动Web输入框踩坑

> 本文首次发布于 [SkioFox Blog](http://blog.skiofox.top), 作者 [SkioFox](https://github.com/LoverFancy/) ,转载请保留原文链接.