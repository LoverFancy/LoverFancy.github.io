---
layout:     post
title:      防抖和节流函数
subtitle:   防抖和节流函数
date:       2017-07-03
author:     SkioFox
header-img: img/phome-bg.jpg
catalog: true
tags:
- 防抖
- 节流
---

## 函数防抖与节流

- 函数节流: 频繁触发,但只在特定的时间内才执行一次代码
- 函数防抖: 频繁触发,但只在特定的时间内没有触发执行条件才执行一次代码 

  ```js
  // 函数防抖：延时执行：需要间隔delay时间触发才会生效
  // 函数防抖的应用场景：输入框搜索自动补全事件，频繁操作点赞和取消点赞，滚动事件，resize窗口变化

  export function debounce(func, delay) {
    let timer
    // 返回一个函数
    return function (...args) {
      if (timer) {
        clearTimeout(timer)
      }
      timer = setTimeout(() => {
        func.apply(this, args)
      }, delay)
    }
  }

  // 函数节流 throttle
  // 原理：当达到了一定的时间间隔就会执行一次；可以理解为是缩减执行频率，即每隔多少事件执行一次
  // 应用场景：如果想要每隔一段时间发送一次请求，而不是等到客户触发最后一次操作才发送请求，可以这样实现
  // 鼠标不断点击触发，mousedown(单位时间内只触发一次)
  // 监听滚动事件，比如是否滑到底部自动加载更多，用throttle来判断
  // 函数节流 throttle
  // 方法一：定时器实现
  const throttle = function(fn,delay) {
    let timer = null

    return function() {
      const context = this
      let args = arguments
      if(!timer) {
        timer = setTimeout(() => {
          fn.apply(context,args) 
          clearTimeout(timer) 
        },delay)
      }
    }
  }
  ```

> 需要修改ES5和ES6 箭头函数版本

> 本文首次发布于 [SkioFox Blog](http://blog.skiofox.top), 作者 [SkioFox](https://github.com/LoverFancy/) ,转载请保留原文链接.